---
// SubcategoryCard.astro
import { iconMap } from "../constants";

interface Props {
  title: string;
  articleCount: number;
  href: string;
}

const { title, articleCount, href } = Astro.props as Props;
const svgString = iconMap["tooth-anatomy"];

if (!svgString) {
  console.warn(`Icon "tooth-anatomy" not found in iconMap.`);
}

const cardStyles = [
  "group relative block h-full overflow-hidden rounded-xl border border-gray-200/80 bg-rich-black-200 backdrop-blur-sm",
  "shadow-sm transition-all duration-500 ease-out",
  "hover:border-blue-300/60 hover:bg-gradient-to-br hover:from-blue-50/80 hover:to-indigo-50/60",
  "hover:shadow-lg hover:shadow-blue-100/50 hover:-translate-y-2",
  "active:translate-y-0 active:scale-[0.98]",
];

const iconStyles = [
  "mb-6 text-blue-500 transition-all duration-500",
  "group-hover:text-blue-600 group-hover:scale-110 group-hover:drop-shadow-sm",
  "h-16 w-16",
];

const titleStyles = [
  "mb-3 text-xl font-semibold text-rich-black-900 transition-colors duration-300",
  "group-hover:text-rich-black-800",
];

const countStyles = [
  "mb-6 text-sm font-medium text-rich-black-500 transition-colors duration-300",
  "group-hover:text-rich-black-600",
];

const linkStyles = [
  "inline-flex items-center gap-2 text-sm font-medium text-blue-600",
  "transition-all duration-300 group-hover:text-blue-700",
  "group-hover:translate-x-1",
];
---

<a href={href} class:list={cardStyles}>
  <div class="p-8">
    {
      svgString && (
        <div class:list={iconStyles}>
          <Fragment set:html={svgString} />
        </div>
      )
    }

    <h3 class:list={titleStyles} transition:name={title}>
      {title}
    </h3>

    <p class:list={countStyles}>
      {articleCount}
      {articleCount === 1 ? "article" : "articles"}
    </p>

    <div class:list={linkStyles}>
      <span>Explore topic</span>
      <svg
        class="h-4 w-4 transition-transform duration-300 group-hover:translate-x-0.5"
        viewBox="0 0 20 20"
        fill="currentColor"
      >
        <path
          fill-rule="evenodd"
          d="M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z"
          clip-rule="evenodd"></path>
      </svg>
    </div>
  </div>
</a>
